# access 模块

## ① 已有权限获取接口

## 1. GET 请求

### 描述

获取用户的权限数据，根据用户 ID 查询其对应的角色权限。

### 响应示例

- 成功响应：
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "msg": "请求数据成功",
      "data": { "xxx": [] } // 角色名及角色对应的权限
    }
    ```
- 失败响应：
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "msg": "未知错误",
      "data": null
    }
    ```

### 参数

| 参数名  | 类型 | 是否必填 | 描述                                           |
| ------- | ---- | -------- | ---------------------------------------------- |
| user_id | int  | 是       | 用户的唯一标识，用于查询该用户对应的角色权限。 |

## ② 角色权限管理接口

## 1. GET 请求

### 描述

分页查询角色权限关系，支持按角色 ID 或权限 ID 筛选。

### 参数

| 参数名     | 类型 | 是否必填 | 描述                                      |
| ---------- | ---- | -------- | ----------------------------------------- |
| page       | int  | 是       | 当前页码，用于分页查询。                  |
| search_key | str  | 否       | 筛选字段，可选值为 `角色ID` 或 `权限ID`。 |
| search     | str  | 否       | 筛选值，与 `search_key` 配合使用。        |

### 响应示例

- 成功响应：
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": true,
      "msg": "请求数据成功",
      "data": [
        {
          "id": 1,
          "role__role_id": "0",
          "access__access_id": 1,
          "role__role_name": "角色名",
          "access__access_name": "权限名"
        }
      ],
      "max_page": 1
    }
    ```
- 失败响应：
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": false,
      "msg": "未知错误",
      "data": null,
      "max_page": null
    }
    ```

## 2. POST 请求

### 描述

添加角色权限关系，确保同一角色不重复添加相同权限。

### 请求体包含参数

| 参数名    | 类型 | 是否必填 | 描述             |
| --------- | ---- | -------- | ---------------- |
| access_id | int  | 是       | 权限的唯一标识。 |
| role_id   | str  | 是       | 角色的唯一标识。 |

### 响应示例

- 成功响应：
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": true,
      "msg": "请求数据成功",
      "data": {}
    }
    ```
- 失败响应：
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": false,
      "msg": "未知错误",
      "data": null
    }
    ```

## 3. DELETE 请求

### 描述

删除角色权限关系，禁止删除超级管理员（`id=999`）的权限。

### 参数

| 参数名 | 类型 | 是否必填 | 描述                     |
| ------ | ---- | -------- | ------------------------ |
| id     | int  | 是       | 角色权限关系的唯一标识。 |

### 响应示例

- 成功响应：
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": true,
      "msg": "删除数据成功"
    }
    ```
- 失败响应：
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": false,
      "msg": "未知错误"
    }
    ```
