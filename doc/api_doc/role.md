# role 模块

- 基础路由：/api/role
- 子路由 ①：/role_manage
- 子路由 ②：/user_role_manage
- 子路由 ③：/role_show

## ① 角色管理接口

## 1. GET 请求

### 描述:

获取角色列表，支持分页和搜索。

### 参数

| 参数名     | 类型 | 是否必填 | 描述                                       |
| ---------- | ---- | -------- | ------------------------------------------ |
| page       | int  | 是       | 当前页码，从 1 开始                        |
| search_key | str  | 否       | 搜索关键字类型，可选值：`角色ID`、`角色名` |
| search     | str  | 否       | 搜索关键字内容，与 `search_key` 配合使用   |

### 响应示例

- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "msg": "请求数据成功",
      "data": [
        {
          "role_id": "1",
          "role_name": "管理员",
          "role_create_time": "2025-01-01T12:00:00Z",
          "role_update_time": "2025-01-01T12:00:00Z"
        },
        {
          "role_id": "2",
          "role_name": "A用户组",
          "role_create_time": "2025-01-01T12:00:00Z",
          "role_update_time": "2025-01-01T12:00:00Z"
        }
      ],
      "max_page": 1
    }
    ```
- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "msg": "未知错误",
      "data": null,
      "max_page": null
    }
    ```

## 2. POST 请求

### 描述

添加新角色。

### 请求体包含参数

| 参数名   | 类型 | 是否必填 | 描述                                         |
| -------- | ---- | -------- | -------------------------------------------- |
| role_id  | str  | 是       | 需要添加的角色的角色 ID                      |
| 其他字段 | 任意 | 否       | 要添加的角色的字段及对应值（如 `role_name`） |

### 响应示例

- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": true,
      "msg": "添加数据成功",
      "data": [
        {
          "role_id": "3",
          "role_name": "作者",
          "role_create_time": "2025-01-01T12:00:00Z",
          "role_update_time": "2025-01-01T12:00:00Z"
        }
      ]
    }
    ```
- 失败响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": false,
      "msg": "未知错误",
      "data": null
    }
    ```

## 3. PUT 请求

### 描述

修改角色信息。

### 请求体包含参数

| 参数名   | 类型 | 是否必填 | 描述                                         |
| -------- | ---- | -------- | -------------------------------------------- |
| role_id  | str  | 是       | 需要修改的角色的角色 ID 且不能为 0 或 999    |
| 其他字段 | 任意 | 否       | 要更新的角色的字段及对应值（如 `role_name`） |

### 响应示例

- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": true,
      "msg": "修改数据成功"
    }
    ```
- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": false,
      "msg": "未知错误"
    }
    ```

## 4. DELETE 请求

### 描述

删除角色。

### 参数

| 参数名  | 类型 | 是否必填 | 描述                                      |
| ------- | ---- | -------- | ----------------------------------------- |
| role_id | str  | 是       | 需要修改的角色的角色 ID 且不能为 0 或 999 |

### 响应示例

- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": true,
      "msg": "删除数据成功"
    }
    ```
- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": false,
      "msg": "未知错误"
    }
    ```

## ② 用户角色管理接口

## 1. GET 请求

### 描述

获取用户角色列表，支持分页和搜索。

### 参数

| 参数名     | 类型 | 是否必填 | 描述                                        |
| ---------- | ---- | -------- | ------------------------------------------- |
| page       | int  | 是       | 当前页码，从 1 开始                         |
| search_key | str  | 否       | 搜索关键字类型，可选值：`角色ID`、`用户 ID` |
| search     | str  | 否       | 搜索关键字内容，与 `search_key` 配合使用    |

### 响应示例

- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "msg": "请求数据成功",
      "data": [
        { "id": 1, "user_id": "1", "role_id": "1" },
        { "id": 2, "user_id": "2", "role_id": "2" }
      ],
      "max_page": 1
    }
    ```
- 失败响应

  - 状态码：`200`
  - 响应体：

    ```json
    {
      "code": "200",
      "msg": "未知错误",
      "data": null,
      "max_page": null
    }
    ```

## 2. POST 请求

### 描述

为用户分配角色。

### 请求体参数

| 参数名  | 类型 | 是否必填 | 描述                |
| ------- | ---- | -------- | ------------------- |
| user_id | str  | 是       | 添加新记录的用户 ID |
| role_id | str  | 是       | 添加新记录的角色 ID |

### 响应示例

- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": true,
      "msg": "添加数据成功",
      "data": {
        "id": 1,
        "user_id": 1,
        "role_id": "0"
      }
    }
    ```
- 失败响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": false,
      "msg": "未知错误",
      "data": null
    }
    ```

## 3. DELETE 请求

### 描述

删除用户的角色。

### 参数:

| 参数名 | 类型 | 是否必填 | 描述                                                     |
| ------ | ---- | -------- | -------------------------------------------------------- |
| id     | int  | 是       | 用户角色记录的 ID（不能删除 role_id 为 0 或 999 的记录） |

响应示例:

### 响应示例

- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "status": true,
      "msg": "删除数据成功"
    }
    ```
- 失败响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "msg": "未知错误",
      "status": false
    }
    ```

## 角色信息接口

## 1. GET 请求

### 描述

获取所有角色（不包括超级管理员 role_id=999）的相关信息。

### 响应示例

- 成功响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "msg": "请求数据成功",
      "roles": [
        { "role_id": "1", "role_name": "管理员" },
        { "role_id": "2", "role_name": "编辑" }
      ]
    }
    ```
- 失败响应
  - 状态码：`200`
  - 响应体：
    ```json
    {
      "code": "200",
      "msg": "未知错误",
      "status": false
    }
    ```

## 通用说明

所有请求都需要通过 Authorization 头传递 token。
权限验证通过 Verify 类进行，角色管理接口 需要 access_id=2，用户角色管理 和 角色信息接口 需要 access_id=5。
